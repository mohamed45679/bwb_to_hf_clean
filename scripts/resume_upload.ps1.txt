# ØªØ£ÙƒÙ‘Ø¯ Ø£Ù†Ù‘Ùƒ ØªÙ‚Ù Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯ scripts
cd C:\Users\Ø§Ù„ÙØ±Ø³Ø§Ù†\bwb_to_hf\scripts

# Ø£Ù†Ø´Ø¦ Ø§Ù„Ù…Ù„Ù Ø¨Ø§Ù„Ù†ØµÙ‘ Ø§Ù„ÙƒØ§Ù…Ù„ Ø¯ÙØ¹Ø© ÙˆØ§Ø­Ø¯Ø©
@'
param(
    [int]$firstChunk = 6500,
    [int]$lastChunk  = 26420,
    [int]$step       = 500
)

$repo  = "Moha8med80/Access_model"
$token = $env:HF_TOKEN
if (-not $token) { throw "âŒ ÙŠØ¬Ø¨ Ø¶Ø¨Ø· HF_TOKEN" }

for ($i = $firstChunk; $i -lt $lastChunk; $i += $step) {
    $s = $i
    $e = [math]::Min($i + $step, $lastChunk)
    Write-Host "ğŸ“¤ Ø±ÙØ¹ Ø§Ù„Ø´Ø±ÙŠØ­Ø© $s â†’ $e ..." -ForegroundColor Cyan

    $args = @(
        "shard_upload_dataset.py",
        "--repo_id",  $repo,
        "--token",    $token,
        "--start",    $s,
        "--end",      $e,
        "--shard_size", $step
    )
    $proc = python $args
    if ($LASTEXITCODE -ne 0) {
        Write-Host "ğŸ›‘ ØªÙˆÙ‚Ù‘Ù Ø¹Ù†Ø¯ Ø§Ù„Ø´Ø±ÙŠØ­Ø© $s â†’ $e Ø¨Ø³Ø¨Ø¨ Ø®Ø·Ø£." -ForegroundColor Red
        break
    }
    Write-Host "âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø´Ø±ÙŠØ­Ø© $s â†’ $e" -ForegroundColor Green
    Start-Sleep -Seconds 5
}
Write-Host "ğŸ‰ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø³ÙƒØ±Ø¨Øª." -ForegroundColor Yellow
'@ | Set-Content -Encoding utf8 .\resume_upload.ps1
